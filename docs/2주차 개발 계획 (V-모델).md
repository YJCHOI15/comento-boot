2주차 개발 계획 (V-모델 적용)
본 프로젝트는 자동차 소프트웨어 개발 표준 프로세스인 V-모델을 따라 진행한다. 2주차에는 실제 하드웨어가 없는 환경을 고려하여, V-모델의 좌측(설계 및 구현)을 중심으로 개발을 진행하고, 우측(검증)에 대해서는 각 단계별 검증 방안 및 테스트 케이스를 설계하는 것을 목표로 한다.

V-모델 좌측: 개발 및 구현 (2주차 수행 내용)
1. Requirement Gathering
수행 내용:

2주차 업무 과제 내용을 분석하여 시스템이 갖춰야 할 핵심 기능(PMIC 모니터링, DTC 관리, CAN 통신, ADC/UART 모니터링)과 성능 요구사항(태스크 주기 등)을 도출한다.

사용될 MCU 및 주변 IC(MP5475GU, 25LC256)의 데이터시트를 분석하여 주요 제약 조건 및 전기적 특성을 파악한다.

산출물:

시스템 요구사항 명세서 (Project Goal, 주요 개발 내용)

2. System Analysis
수행 내용:

요구사항을 바탕으로 하드웨어 구성 요소와 소프트웨어의 전체적인 구조를 정의한다.

MCU를 중심으로 각 IC 칩이 어떤 통신 방식으로 연결되는지 분석하고, 데이터 흐름을 정의한다.

소프트웨어는 유지보수성과 재사용성을 고려하여 계층형 아키텍처(Layered Architecture)로 구성하기로 결정한다.

산출물:

시스템 블록 다이어그램

소프트웨어 아키텍처 개요 (Application/Driver Layer)

3. Software Design
수행 내용:

시스템 분석 단계를 기반으로, 소프트웨어의 고수준(High-level) 설계를 수행한다.

RTOS 태스크(I2CTask, SPITask, CANTask, ADCTask, UARTTask)의 역할과 책임을 명확히 정의한다.

태스크 간의 상호작용을 위해 필요한 RTOS 객체(메시지 큐, 뮤텍스, 세마포어)를 정의하고, 이들 간의 데이터 흐름을 설계한다.

산출물:

RTOS 태스크 설계서 (동작 흐름도 포함)

태스크 동기화 설계서 (뮤텍스 사용 방안)

V-모델 검증 계획 (System Test Plan):

목표: 모든 모듈이 통합된 상태에서 End-to-End 시나리오의 정상 동작을 검증하기 위한 테스트 계획을 수립한다.

테스트 케이스 예시: "외부에서 인위적으로 저전압 상황을 만들었을 때, I2CTask가 이를 감지하고 SPITask를 통해 EEPROM에 정확한 DTC를 저장한 뒤, CANTask가 진단기의 요청에 따라 해당 DTC를 정상적으로 응답하는가?"

4. Module Design
수행 내용:

소프트웨어 설계 내용을 바탕으로, 각 모듈(드라이버, 태스크)의 내부 동작을 상세히 설계한다.

pmic_mp5475gu.h, dtc_manager.h, can_protocol.h 등 헤더 파일에 사용할 데이터 구조체(union, struct), 열거형(enum), 상수(define)를 정의한다.

각 드라이버 함수의 API(입력 인자, 반환 값)를 명세하고, 태스크 내부의 상태 변수 및 처리 로직을 구체화한다.

산출물:

DTC 코드 정의서 (dtc_manager.h)

CAN 프로토콜 정의서 (can_protocol.h)

각 드라이버 모듈 상세 설계서 (API 명세)

V-모델 검증 계획 (Integration Test Plan):

목표: 각 모듈이 서로 데이터를 주고받으며 올바르게 연동되는지 검증하기 위한 테스트 계획을 수립한다.

테스트 케이스 예시: "I2CTask가 DTC_RequestQueue로 보낸 DTC 저장 요청 메시지를 SPITask가 정상적으로 수신하여 처리하는가?", "SPITask가 bsp_eeprom 드라이버 함수를 호출했을 때, SPI 파형이 데이터시트와 일치하는가? (로직 분석기 사용 계획)"

5. Coding
수행 내용:

모듈 설계를 바탕으로 실제 C 코드를 작성한다.

Core/Bsp/ 폴더에 bsp_pmic_mp5475gu.c, bsp_eeprom_25lc256.c 등 각 하드웨어 드라이버를 구현한다.

Core/Src/tasks.c 파일에 모든 RTOS 태스크의 동작 로직을 구현한다.

산출물:

전체 소스코드 (.c, .h 파일)

폴더 구조 정의서

V-모델 검증 계획 (Unit Test Plan):

목표: 각 개별 함수(Unit)가 의도한 대로 정확하게 동작하는지 독립적으로 검증하기 위한 테스트 계획을 수립한다.

테스트 케이스 예시: "bsp_adc.c의 ADC_GetVoltage() 함수에 ADC 디지털 값 2048을 가상으로 입력했을 때, 약 1.65V가 반환되는가?", "SPITask의 DTC 중복 저장 방지 로직이 가상의 DTC 목록 데이터에 대해 정상적으로 동작